<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostStudio I.A - Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;800;900&family=Montserrat:wght@300;400;500;600;700;800;900&family=Roboto:wght@300;400;500;700;900&family=Open+Sans:wght@300;400;600;700;800&family=Lato:wght@300;400;700;900&family=Source+Sans+Pro:wght@300;400;600;700;900&family=Nunito:wght@300;400;600;700;800;900&family=Quicksand:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700;800;900&family=Abril+Fatface&family=Merriweather:wght@300;400;700;900&family=PT+Serif:wght@400;700&family=Work+Sans:wght@300;400;600;700;800&family=Oswald:wght@300;400;500;600;700&family=Lobster&family=Pacifico&family=Dancing+Script:wght@400;500;600;700&family=Great+Vibes&family=Satisfy&family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Fontes personalizadas */
        .font-inter { font-family: 'Inter', sans-serif; }
        .font-poppins { font-family: 'Poppins', sans-serif; }
        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-montserrat { font-family: 'Montserrat', sans-serif; }
        
        /* Efeitos de texto modernos */
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .text-shadow-glow {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        /* Animações suaves */
        .animate-fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }
        
        .animate-slide-up {
            animation: slideUp 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        /* Efeitos de hover aprimorados */
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Header -->
    <header class="glass-effect">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <i class="fas fa-brain text-3xl text-white mr-3"></i>
                    <h1 class="text-2xl font-bold text-white">PostStudio I.A</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="userWelcome" class="text-white/80">Carregando...</span>
                    <button onclick="logout()" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        <i class="fas fa-sign-out-alt mr-2"></i>Sair
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Welcome Section -->
        <div class="glass-effect rounded-2xl p-8 mb-8 animate-fade-in">
            <div class="text-center">
                <h2 id="welcomeTitle" class="text-4xl font-bold text-white mb-4 font-playfair text-shadow-glow">Bem-vindo ao PostStudio I.A</h2>
                <p id="welcomeSubtitle" class="text-white/90 text-lg mb-6 font-inter">Sua plataforma de inteligência artificial para criação e gestão de conteúdo</p>
                <div class="mt-4 flex justify-center">
                    <div class="w-24 h-1 bg-gradient-to-r from-pink-400 to-purple-400 rounded-full"></div>
                </div>
                <div class="flex flex-wrap justify-center gap-4">
                    <button onclick="window.location.href='/create-post'" class="bg-white text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-white/90 transition-all transform hover:scale-105">
                        <i class="fas fa-plus mr-2"></i>Criar Post
                    </button>
                    <button onclick="window.location.href='/video-editor-pro.html'" class="bg-white/20 text-white px-6 py-3 rounded-lg font-semibold hover:bg-white/30 transition-all transform hover:scale-105">
                        <i class="fas fa-video mr-2"></i>Editor de Vídeo Profissional
                    </button>
                    <button onclick="window.location.href='/videos'" class="bg-white/20 text-white px-6 py-3 rounded-lg font-semibold hover:bg-white/30 transition-all transform hover:scale-105">
                        <i class="fas fa-play-circle mr-2"></i>Meus Vídeos
                    </button>
                    <button onclick="window.location.href='/settings'" class="bg-white/20 text-white px-6 py-3 rounded-lg font-semibold hover:bg-white/30 transition-all transform hover:scale-105">
                        <i class="fas fa-cog mr-2"></i>Configurações
                    </button>
                </div>
            </div>
        </div>

        <!-- Features Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- AI Content Creation -->
            <div class="glass-effect rounded-2xl p-6 hover-lift animate-slide-up">
                <div class="text-center">
                    <i class="fas fa-robot text-5xl text-white mb-4 drop-shadow-lg"></i>
                    <h3 class="text-xl font-bold text-white mb-3 font-montserrat">Criação com IA</h3>
                    <p class="text-white/80 text-sm mb-4 font-inter">Gere conteúdo automático usando inteligência artificial</p>
                    <button onclick="window.location.href='/create-post'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors font-semibold">
                        <i class="fas fa-magic mr-2"></i>Explorar
                    </button>
                </div>
            </div>

            <!-- Social Media Management -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300">
                <div class="text-center">
                    <i class="fas fa-share-alt text-4xl text-white mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Redes Sociais</h3>
                    <p class="text-white/80 text-sm mb-4">Conecte e publique automaticamente</p>
                    <button onclick="window.location.href='/settings'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        <i class="fas fa-cog mr-2"></i>Configurar
                    </button>
                </div>
            </div>

            <!-- Meus Posts -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300">
                <div class="text-center">
                    <i class="fas fa-file-alt text-4xl text-white mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Meus Posts</h3>
                    <p class="text-white/80 text-sm mb-4">Visualize e gerencie todos os seus posts</p>
                    <button onclick="window.location.href='/posts'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        Ver Posts
                    </button>
                </div>
            </div>

            <!-- Analytics -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300">
                <div class="text-center">
                    <i class="fas fa-chart-line text-4xl text-white mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Analytics</h3>
                    <p class="text-white/80 text-sm mb-4">Acompanhe o desempenho dos seus posts</p>
                    <button onclick="window.location.href='/analytics'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        Ver Relatórios
                    </button>
                </div>
            </div>

            <!-- Content Calendar -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300">
                <div class="text-center">
                    <i class="fas fa-calendar-alt text-4xl text-white mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Calendário</h3>
                    <p class="text-white/80 text-sm mb-4">Planeje e agende suas publicações</p>
                    <button onclick="window.location.href='/calendar'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        Agendar
                    </button>
                </div>
            </div>

            <!-- Templates -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300">
                <div class="text-center">
                    <i class="fas fa-file-alt text-4xl text-white mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Templates</h3>
                    <p class="text-white/80 text-sm mb-4">Use templates prontos para acelerar a criação</p>
                    <button onclick="window.location.href='/create-post'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        Ver Templates
                    </button>
                </div>
            </div>

            <!-- Editor Visual -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300">
                <div class="text-center">
                    <i class="fas fa-paint-brush text-4xl text-white mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Editor Visual</h3>
                    <p class="text-white/80 text-sm mb-4">Crie posts com preview em tempo real</p>
                    <button onclick="window.location.href='/visual-editor'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        <i class="fas fa-magic mr-2"></i>Editor Visual
                    </button>
                </div>
            </div>

            <!-- Premium Features -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300 border-2 border-yellow-400/30">
                <div class="text-center">
                    <i class="fas fa-crown text-4xl text-yellow-400 mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Recursos Premium</h3>
                    <p class="text-white/80 text-sm mb-4">Google Fonts, filtros, Text-to-Speech e mais</p>
                    <button onclick="window.location.href='/subscription'" class="bg-gradient-to-r from-yellow-400 to-orange-400 text-black px-4 py-2 rounded-lg font-semibold hover:from-yellow-500 hover:to-orange-500 transition-all transform hover:scale-105">
                        <i class="fas fa-crown mr-2"></i>Ver Planos
                    </button>
                </div>
            </div>

            <!-- AI Insights -->
            <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300">
                <div class="text-center">
                    <i class="fas fa-lightbulb text-4xl text-white mb-4"></i>
                    <h3 class="text-xl font-bold text-white mb-2">Insights IA</h3>
                    <p class="text-white/80 text-sm mb-4">Receba sugestões inteligentes para melhorar seu conteúdo</p>
                    <button onclick="window.location.href='/insights'" class="bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-colors">
                        Ver Insights
                    </button>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="glass-effect rounded-2xl p-6 mt-8">
            <h3 class="text-xl font-bold text-white mb-4">
                <i class="fas fa-clock mr-2"></i>Atividade Recente
            </h3>
            <div class="space-y-3">
                <div class="flex items-center text-white/80">
                    <i class="fas fa-check-circle text-green-400 mr-3"></i>
                    <span>Sistema inicializado com sucesso</span>
                    <span class="ml-auto text-sm">Agora</span>
                </div>
                <div class="flex items-center text-white/80">
                    <i class="fas fa-info-circle text-blue-400 mr-3"></i>
                    <span>Bem-vindo ao PostStudio I.A</span>
                    <span class="ml-auto text-sm">Agora</span>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Carregar dados do usuário ao carregar a página
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const response = await fetch('/api/user');
                
                if (response.ok) {
                    const data = await response.json();
                    const user = data.user;
                    
                    // Atualizar header
                    document.getElementById('userWelcome').textContent = `Bem-vindo, ${user.name}`;
                    
                    // Atualizar seção de boas-vindas (mantém mensagem genérica)
                    document.getElementById('welcomeTitle').textContent = `Bem-vindo ao PostStudio I.A`;
                    document.getElementById('welcomeSubtitle').textContent = `Sua plataforma de inteligência artificial para criação e gestão de conteúdo`;
                    
                } else if (response.status === 401) {
                    // Usuário não autenticado, redirecionar para login
                    window.location.href = '/';
                } else {
                    console.error('Erro ao carregar dados do usuário');
                    document.getElementById('userWelcome').textContent = 'Erro ao carregar dados';
                }
            } catch (error) {
                console.error('Erro:', error);
                document.getElementById('userWelcome').textContent = 'Erro de conexão';
            }
        });

        async function logout() {
            if (confirm('Tem certeza que deseja sair?')) {
                try {
                    const response = await fetch('/api/logout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });
                    
                    if (response.ok) {
                        window.location.href = '/';
                    } else {
                        console.error('Erro ao fazer logout');
                        // Mesmo com erro, redirecionar para login
                        window.location.href = '/';
                    }
                } catch (error) {
                    console.error('Erro:', error);
                    // Mesmo com erro, redirecionar para login
                    window.location.href = '/';
                }
            }
        }

        // Adicionar efeitos de hover nos cards
        document.querySelectorAll('.glass-effect').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>
